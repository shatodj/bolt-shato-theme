{% extends 'twig/partials/_master.twig' %}
{% import "twig/partials/_macros.twig" as m %}

{% set headerBlockClass = "hero is-header " ~ theme.layout.class.header_record|default("is-primary") %}

{% block stylesheet %}
    {# Defer loading of non-critical styles #}
    {{ m.stylesheet_inline('dist/css/record-bundle.css') }}
{% endblock %}

{% block scripts %}
    {{ m.script('dist/js/record-bundle.js') }}
{% endblock %}


{% block content %}
    {% set ef = excludedFields|default([]) %}

	{% if record is defined %}
        <article>
            {% block body %}
                {% block record_header %}
                    {% include "twig/partials/_record_header.twig" with { extraClass: headerBlockClass} %}
                {% endblock %}

                {% block record_edit %}
                    {% include "twig/partials/_record_edit.twig" %}
                {% endblock %}

                {% block record_body %}
                    {% set recordExtraClass = config.get("theme/layout/class/record")|default %}
                    <section class="section shpr-section {{ recordExtraClass }}">
                        <div class="container content">
                            
                            {% block fields %}
                                {% with { 'record': record, exclude: ef|merge(['teaser']) } %}
                                {{ block('sub_fields', 'twig/partials/_sub_blocks_field.twig') }}
                                {% endwith %}
                            {% endblock %}

                        </div>
                    </section>
                {% endblock %}
                {% block record_footer %}
                    {# To be extended #}
                {% endblock %}
            {% endblock %}
        </article>
	{% endif %}

    {% block recent %}
        {# To be extended #}
    {% endblock %}

	{# Standard SECTIONS #}
	{% block sections %}
        {{ m.sectionsByRecord(record) }}
		{{ m.sectionsByGroup("record") }}
	{% endblock %}

{% endblock content %}
